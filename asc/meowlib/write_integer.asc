################################################################################
# ml_write_integer(n) writes given integer n
################################################################################

# FIXME - not working for negative integers

ml_write_integer
	ADJUST 2
	PUSH	-3[0]
	POP	0[0]	# n

# recursively write larger digits first
# rest = n div 10
	PUSH	0[0]
	CONSTI	10
	DIVI
	POP	1[0]
# if rest > 0, write them first
	PUSH	1[0]
	IFNZ	write_larger_digits
	GOTO	write_current_digit
write_larger_digits
	PUSH	1[0]
	call	0, ml_write_integer
	ADJUST	-1
write_current_digit
# last digit = n mod 10
	PUSH	0[0]
	CONSTI	10
	MOD
# add 48 to get ascii character value
	CONSTI 	48
	ADDI
# write it
	WRITEC

	ADJUST -2
	RET	0
