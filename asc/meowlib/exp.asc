################################################################################
# exp(x) - return the base of natural logarithms raised to the power x 
################################################################################

# Test
#	READR
#	CALL	0, ml_exp
#	!D
#	STOP

ml_exp
	# e, i, result
	ADJUST	3

	# e = 2.718281828459045
	CONSTR	2.718281828459045
	POP	0[0]

	# i = 0
	CONSTR	0.0
	POP	1[0]

	# result = 1
	CONSTR	1.0
	POP	2[0]

ml_exp_loop
	# while (i < x)
	PUSH	1[0]
	PUSH	-3[0]
	LTR
	IFZ	ml_exp_done

	# result = result * e
	PUSH 	2[0]
	PUSH	0[0]
	MULR
	POP	2[0]

	# i = i + 1
	PUSH	1[0]
	CONSTR	1
	ADDR
	POP	1[0]

	GOTO	ml_exp_loop

ml_exp_done
	# retval = result
	PUSH	2[0]
	POP	-3[0]

	ADJUST	-3
	RET	0
