

##########################################################
# Functions for bounds checking array accesses
##########################################################

ml_bcheck
	PUSH -4[0]
	CONSTI 0
	LTI
	IFNZ ml_bounderror
	PUSH -4[0]
	PUSH -3[0]
	GTI
	IFNZ ml_bounderror2
	RET 0

# For array underflow
ml_bounderror
	CONSTI 69
	WRITEC
	CONSTI 82
	WRITEC
	CONSTI 82
	WRITEC
	CONSTI 79
	WRITEC
	CONSTI 82
	WRITEC
	CONSTI 32
	WRITEC
	CONSTI 58
	WRITEC
	CONSTI 32
	WRITEC
	CONSTI 66
	WRITEC
	CONSTI 79
	WRITEC
	CONSTI 85
	WRITEC
	CONSTI 78
	WRITEC
	CONSTI 68
	WRITEC
	CONSTI 32
	WRITEC
	CONSTI 85
	WRITEC
	CONSTI 70
	WRITEC
	CONSTI 10
	WRITEC
	STOP

# For array overflow
ml_bounderror2
	CONSTI 69
	WRITEC
	CONSTI 82
	WRITEC
	CONSTI 82
	WRITEC
	CONSTI 79
	WRITEC
	CONSTI 82
	WRITEC
	CONSTI 32
	WRITEC
	CONSTI 58
	WRITEC
	CONSTI 32
	WRITEC
	CONSTI 66
	WRITEC
	CONSTI 79
	WRITEC
	CONSTI 85
	WRITEC
	CONSTI 78
	WRITEC
	CONSTI 68
	WRITEC
	CONSTI 32
	WRITEC
	CONSTI 79
	WRITEC
	CONSTI 70
	WRITEC
	CONSTI 10
	WRITEC
	STOP

ml_nobcheck
	RET 0
